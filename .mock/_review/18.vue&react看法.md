# vue vs react

考虑相同点 和 不同点

## 相同点

### 组件化思想

都采用了组件化的架构，将 UI 界面拆分成独立的、可复用的组件；
每个组件负责渲染一部分视图，并且可以包含自己的状态和逻辑。
这种组件化的思想使得代码更加模块化，提高了代码的可维护性和复用性。

### 虚拟 DOM

相比以前的 JQuery 操作 DOM 元素来更新界面的方式，vue 和 react 都选择通过把真实 dom 树 抽象为 虚拟 dom 树来进行处理；

当组件的状态发生变化时，框架会先更新虚拟 DOM，然后通过高效的算法计算出真实 DOM 的最小更新范围，从而减少对真实 DOM 的操作次数，提高渲染性能；

真实 dom 节点的增删改 对应了 更新前后两个虚拟 dom 树对象的 diff

视图更新：React 使用了“双缓冲”机制和“递归比较”算法，而 Vue 使用了依赖追踪和异步更新队列的机制。

### 数据响应式更新

数据状态变化 =》 会触发视图更新

## 不同点

### 设计理念

vue 定位为一个渐进式框架，让用户逐步去使用框架特性，它更专注在于模版视图，所以提供了一套声明式 API，我们只需要写好 data，method，模版 template 就能完成一个页面组件；

react 设计理念就是 组件，页面所有东西都是 组件构成的；而且架设设计分工明确，
整个工作流程解耦明确，react dom 负责渲染，reconciler 构造器 和 scheduler 负责处理 fiberTree 输入输出

### 语法层面

vue template 语法
react jsx 更灵活

### 数据流和视图更新方式

Vue 的数据流是双向的，它提供了双向数据绑定的机制，数据模型和视图之间的同步更加简单；

React 的数据流是单向的，它强调单向数据流和不可变性。
React 中的数据状态更新是通过调用 setState 或 useState 来实现的，数据从父组件流向子组件

react 是全量 re-render 视图更新
React 项目中的任何一个组件发生 state 状态的变更，React 更新机制都会从最顶层的根节点开始往下递归对比，通过双缓存机制判断出哪些节点发生了变化，然后更新节点。这样的更新机制成本并不小，因为在判断过程中，如果 React 发现 props、state、context 任意一个不同，那么就认为该节点被更新了。因此，冗余的 re-render 在这个过程中会大量发生。

**vue 是局部视图更新（通过依赖追踪的细粒度级别的更新），通过`响应式系统`和`虚拟 DOM` 来实现高效的视图更新**

data 属性的值变化时。Vue 会通过响应式系统捕获这个变化，然后重新渲染虚拟 DOM 树，比较新旧虚拟 DOM 树的差异，生成 patch 操作列表，最后更新真实 DOM

响应式系统：  
1.数据劫持：Proxy 可以直接对整个对象进行拦截，而不需要像 Object.defineProperty 那样逐个属性遍历设置 getter 和 setter；
当修改属性时，setter 会被触发。在 setter 中，Vue 会通知依赖该属性的视图进行更新。

2.依赖收集
当组件的模板渲染时，Vue 会创建一个渲染 watcher。
在渲染过程中，当访问数据对象的属性 a 时，getter 会被触发。此时，getter 会将当前的渲染 watcher 添加到该属性 a 的依赖列表中；这样，属性 a 就和渲染 watcher 建立了依赖关系

3.变更通知
当数据对象的属性值 a 发生变化时，其 setter 会被触发。在 setter 中，Vue 会遍历该属性 a 的依赖列表，通知所有依赖该属性的 watcher 进行更新。

虚拟 DOM：  
1.虚拟 DOM 的创建，当组件的模板被解析时，Vue 会将模板转换为虚拟 DOM 树对象

2.虚拟 DOM 的更新，当数据发生变化时，Vue 会重新渲染组件的虚拟 DOM 树。然后，Vue 会比较新旧虚拟 DOM 树的差异。
Vue 会根据差异生成一个 patch 操作列表，这个列表包含了需要对真实 DOM 进行的最小化操作，如更新文本内容、添加或删除节点等。
最后，Vue 会根据 patch 操作列表对真实 DOM 进行更新

更新优化：  
1.异步更新队列  
Vue 在内部使用异步更新队列来处理数据变更。当数据发生变化时，Vue 会将更新任务放入队列中，等待时机进行批处理；而不是立即执行更新操作。
在同一个事件循环中，假如有多个数据变更操作，Vue 会将这两个更新任务放入队列中，然后在下一个事件循环中统一处理这些任务。这样可以避免多次不必要的 DOM 更新和 re-render，提高渲染性能。  
2.组件更新策略
Vue 会根据组件的依赖关系和更新策略来决定是否需要更新组件。
如果一个组件的父组件的数据发生了变化，但这个变化不影响子组件的渲染，Vue 会跳过子组件的更新；通过 shouldComponentUpdate，shouldUpdate 钩子函数来控制
